{{!-- Title Tag SEO --}}

<head>
    <title>https://happyminds.onrender.com/</title>
</head>
{{!-- Title Meta description Tag--}}

<head>
    <meta name="description" content="
    {{!-- Content of desciption --}}
    Trang Web tập thể dục chất lượng cao, 
    nơi bạn có thể truy cập miễn phí và tận hưởng những buổi tập đa dạng, 
    giúp nâng cao sức khỏe và tinh thần của bạn!.
">
</head>
<header>
    <a href="https://happyminds.onrender.com/" style="display: none;">BLOGS & ARTICLES</a>
</header>
<link rel="canonical" href="https://happyminds.onrender.com/">
<div class="container bg">
    <div class="row pt-5">
        <div class="content col-lg-11 col-md-10 col-9 text-center">
            <h2 class="ms-5 ps-5 fw-bold" style="color: #fd0054;">BLOGS & ARTICLES</h2>
            <h5 class="ms-5 ps-5 fw-medium">OUR RECENT ARTICLES</h5>
        </div>
    </div>
    <div class="row row-cols-1">
        <div class="col d-flex justify-content-end">
            <button type="button" class="btn fs-5 " data-bs-toggle="modal" data-bs-target="#exampleModal"
                style="background-color: #fd0054; color: white;">New Post</button>
        </div>
    </div>
    <div class="row row-cols-1 row-cols-lg-3 row-cols-md-2 g-4 pt-4">
        {{#each blogs}}
        <div class="col pb-3">
            <div class="card">
                <a href="/blogDetail/{{this.slug}}" class="text-decoration-none text-reset">
                    <img src="{{this.image}}" class="card-img-top" style="height: 300px;" alt="{{this.image}}">
                    <div class="card-body pb-0">
                        <h5 class="card-title">{{this.title}}</h5>
                        <div class=" col-lg-8 d-flex justify-content-start">
                            <img class="col-lg-4 col-1 my-2" style="width: 30px; height: 30px" src="/img/Image.png" alt>
                            <p class="m-0 d-flex align-items-center mx-2" style="font-size:medium;">{{this.author}}</p>
                        </div>
                        <p class="content-text-blog">{{this.content}}</p>
                        <div class="d-flex justify-content-between">
                            <p class="card-text" style="font-size:14px;">FEB 12, 2020</p>
                            <p class="card-text ">
                                <a href="/blog/blogDetail/{{this.slug}}" class="text-danger fw-medium fw-semibold"
                                    style="text-decoration: none">MORE
                                    INFO<img class="pb-1" src="/img/goRight.png" alt=""></a>
                            </p>
                        </div>

                    </div>
                </a>
            </div>
        </div>
        {{/each}}
    </div>

    {{!-- New post --}}
    <form action="blog/create" method="post">
        <div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content col-md-10" style="border-radius: 20px 20px 20px 20px;">
                    <div class="modal-header d-flex justify-content-center"
                        style="background-color:rgba(253, 0, 84, 1); border-radius: 20px 20px 0 0;">
                        <h5 class="modal-title text-white" id="exampleModalLabel">What's your mind
                            ?</h5>

                    </div>
                    <div class="modal-body ">
                        <label for="author"><b>Your Name</b></label>
                        <input class="form-control" name="author" id="name" required style="border-radius:10px">
                        <label for="title"><b>Title</b></label>
                        <input class="form-control" name="title" id="title" style="border-radius:10px">

                        <label for="content"><b>Content</b></label>
                        <textarea class="col-12 form-control text-start" name="content" id="content" rows="8"
                            style="border-radius:10px;" placeholder="Type what in your mind ..."></textarea>
                        <div id="uploadImg">
                            <label class="col-12 btn btn-outline-secondary mt-2">Upload
                                your image
                                <i class="bi bi-upload ms-1"></i>
                                <input type="file" value="" id="inpImg" class="custom-file-input"
                                    style="display:none;">
                                    <img src="" name="image" id="image" alt="" style="display: none;">
                            </label>
                        </div>
                        <center>
                            <p id="uploading_text"></p>
                        </center>
                    </div>
                    <div class="modal-footer d-flex justify-content-center border"
                        style="border-radius: 0 0 20px 20px;">
                        <button type="button" class="btn btn-secondary" style="width: 200px;" data-bs-dismiss="modal"
                            aria-label="Close">Cancel</button>
                        <button type="submit" class="btn btn-danger " style="width: 200px;">Post</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<center>
    <div class="row mb-3">
        <div class="col d-flex justify-content-end pe-0 m-0">
            <a href="/blog?page={{subtract currentPage 1}}" class="">
                <button type="button" class="btn btn-danger"><i class="bi bi-caret-left-fill"></i></button>
            </a>
        </div>
        <div class="col-1 d-flex justify-content-center">
            <span
                class="input-group-text d-flex align-items-center justify-content-center w-100 p-0 fs-5">{{currentPage}}/{{totalPages}}</span>
        </div>
        <div class="col d-flex justify-content-between ps-0">
            <a href="/blog?page={{sum currentPage 1}}" class="">
                <button class="btn btn-success"><i class="bi bi-caret-right-fill"></i></button>
            </a>
        </div>
    </div>
</center>

<div class="">
    <div class="col d-flex justify-content-end mb-0 me-5" style=" position: fixed; bottom: 27%; right: 1%;">
        <a href="#">
            <button class="btn btn-danger fs-4 rounded-3">
                <i class="bi bi-arrow-up text-light fs-4"></i>
            </button>
        </a>
    </div>
</div>
</div>
<script>
    const fileInput = document.getElementById('inpImg');
    const uploading_text = document.getElementById("uploading_text");
    const cloud_name = "duas1juqs";
    const upload_preset = "pnvimage";
    fileInput.addEventListener("change", (e) => {
        uploading_text.innerText = "Uploading...";
        document.getElementById("uploadImg").style.display = 'none';
        const file = e.target.files[0];
        const formData = new FormData();
        formData.append("file", file);
        formData.append("upload_preset", upload_preset);
        const options = {
          method: "POST",
          body: formData,
        };

        return fetch(
          `https://api.cloudinary.com/v1_1/${cloud_name}/image/upload`,
          options
        )
          .then((res) => res.json())
          .then((data) => {
            console.log(data.secure_url);

            uploading_text.innerHTML = `
            <br />
            <img style="max-width:300px" src="${data.secure_url}" alt="">
            `;
            document.getElementById("uploadImg").style.display = 'block';
          })
          .catch((err) => console.log(err));
    });
</script>